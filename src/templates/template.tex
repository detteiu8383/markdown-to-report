\RequirePackage{plautopatch}
\documentclass[uplatex,dvipdfmx,a4paper,11pt]{jsarticle}
% 余白を調製
% \usepackage[includeheadfoot,top=20truemm,bottom=20truemm, right=25truemm,left=25truemm]{geometry}

\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\usepackage{bm}
\usepackage{longtable} % 表組みに必要
\usepackage{booktabs} % 表組みに必要
\usepackage{subfig} % 図の横並びに必要
\usepackage[normalem]{ulem} % 取り消し線に必要
\usepackage{url}
\usepackage{caption}
\usepackage{mhchem} % 分子式書くときに必要
\usepackage[backend=biber]{biblatex}
\usepackage{hyperref}
\usepackage{pxjahyper} % ハイパーリンクに日本語が含まれる場合に必要
\hypersetup{% hyperrefのオプションリスト
    colorlinks=true,% カラーリンクを使用
    linkcolor=black,% 内部参照リンクの色
    citecolor=black,% 文献参照リンクの色
    filecolor=black,% ローカルファイル参照リンクの色
    urlcolor=blue % 外部参照URLの色
}

% コードブロック書くときに必要
\usepackage{listings,jlisting}
\newcommand{\passthrough}[1]{\texttt{#1}}

\renewcommand{\lstlistingname}{ソースコード} % コードブロックのキャプションを変更

% 画像を記述された場所に挿入(デフォルトではページ上部に挿入されてしまう)
\usepackage{float}
\let\origfigure\figure
\let\endorigfigure\endfigure
\renewenvironment{figure}[1][2] {
    \expandafter\origfigure\expandafter[H]
} {
    \endorigfigure
}

% 画像の縦横比を保ったままサイズ変更を可能にする
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

\def\tightlist{\itemsep1pt\parskip0pt\parsep0pt} % これがないと\tightlistが動かない

% ジャーナルタイトルを斜体にする
\DeclareFieldFormat[article]{journaltitle}{\textit{#1}}
% タイトルをダブルクォーテーションで囲む
\DeclareFieldFormat[article]{title}{\mkbibquote{#1\isdot}} 
% miscのタイトルはそのまま表示する
\DeclareFieldFormat[misc]{title}{#1}

\newcommand{\reportTitle}[1]{\begin{center}{\LARGE #1}\end{center}}
\newcommand{\reportName}[1]{\begin{flushright}{\large #1}\end{flushright}}

\addbibresource {references.bib}

\begin{document}
\lstset{
    frame={tb},
    basicstyle={\small\ttfamily},               % 全文字に適用される設定
    identifierstyle={\color[HTML]{24292e}},     % 識別子に〃
    commentstyle={\color[HTML]{50a14f}},        % コメントに〃
    keywordstyle={\color[HTML]{d73a49}},        % キーワード(ifとかforとか)に〃
    ndkeywordstyle={\color[HTML]{6f42c1}},      % 日本語訳がわからんけど多分組み込み関数とかに〃
    stringstyle={\color[HTML]{032f62}},         % 文字列リテラルに〃
    showstringspaces=false,
    numbers=left,
    numbersep=10pt,
    numberstyle={\small\ttfamily\color[HTML]{babbbd}},
    xrightmargin=0zw,
    xleftmargin=2zw,
    tabsize=2,
    extendedchars=true,
    columns=fixed,
    basewidth=0.5em
}
\input{main}
\printbibliography[title=参考文献]
\end{document}
